# Update zsh-config and all plugins
# Use 'zupdate --help' for more information.

local -A _fn=(
    [info]="Update zsh-config and all plugins"
    [desc]="Pulls the latest changes from the zsh-config repository and updates
            all installed plugins using git pull --rebase."
    [version]="0.5.0"
    [created]="2025"
    [modified]="2026-02-02"
    [license]="MIT"
    [author]="Andrzej Barabasz"
)

local -A opts=() args=()
_fn_init "$@" || return $REPLY

printi "Updating zsh-config..."
local zdir=${ZDOTDIR:A}
git -C $zdir pull --rebase 2>&1
if (( $status != 0 )); then
    printe "Git pull failed for zsh-config."
else
    prints "zsh-config updated successfully."
fi

printi "Updating zsh plugins..."
update_plugins
if (( $status != 0 )); then
    printe "One or more plugins failed to update."
else
    prints "All plugins updated successfully."
fi
